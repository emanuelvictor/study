<div *tdLoading="'overlayStarSyntax'; mode:'indeterminate'; type:'circle'; strategy:'overlay'; color:'accent'">
  <div class='main-content' *ngIf="fornecedor?.status === 'EM_ANALISE'">
    <mat-card style='border-top: none !important; margin-bottom: 30px !important'>

      <div layout='row'>
        <div class='info-tittle'
             style='font-size: 18px !important; font-weight: bold!important; color:#00ABAF !important; padding-bottom: 20px'>
          Em processo de análise
        </div>
      </div>

      <div layout='row'>
        <div>
          O seu cadastro está sendo analisado pela equipe da Fundação PTI-BR. Após a validação, você será notificado via
          e-mail e, caso aprovado, poderá gerar o seu CRC por meio desta plataforma.
        </div>
      </div>

    </mat-card>
  </div>

  <div *ngIf="fornecedor?.status === 'APROVADO'" class='main-content' layout='row' layout-margin>
    <div flex='15' style='min-width: 296px !important;' layout='column'>

      <mat-nav-list class='pad-none'>
        <mat-list class='pad-none'>
          <mat-list-item disableRipple routerLink='inicio'>
            <div layout='row' flex>
              <h3 flex>Informações do Perfil</h3>
            </div>
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item routerLink='inicio'
                         routerLinkActive #inicio='routerLinkActive'
                         [ngClass]="{'menu-active': inicio.isActive}">
            <div layout='row' flex>
              <mat-icon>keyboard_arrow_right</mat-icon>
              <span flex>Início</span>
            </div>
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item routerLink='meus-dados-gerais'
                         routerLinkActive #dadosGerais='routerLinkActive'
                         [ngClass]="{'menu-active': dadosGerais.isActive}">
            <div layout='row' flex>
              <mat-icon>keyboard_arrow_right</mat-icon>
              <span flex>Dados Gerais</span>
            </div>
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item routerLink='meus-contatos'
                         routerLinkActive #contatos='routerLinkActive'
                         [ngClass]="{'menu-active': contatos.isActive}">
            <div layout='row' flex>
              <mat-icon>keyboard_arrow_right</mat-icon>
              <span flex>Contatos</span>
            </div>
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item routerLink='meus-dados-bancarios'
                         routerLinkActive #dadosBancarios='routerLinkActive'
                         [ngClass]="{'menu-active': dadosBancarios.isActive}">
            <div layout='row' flex>
              <mat-icon>keyboard_arrow_right</mat-icon>
              <span flex>Dados Bancários</span>
            </div>
          </mat-list-item>
          <mat-divider></mat-divider>
          <mat-list-item routerLink='meus-documentos'
                         routerLinkActive #documentos='routerLinkActive'
                         [ngClass]="{'menu-active': documentos.isActive}">
            <div layout='row' flex>
              <mat-icon>keyboard_arrow_right</mat-icon>
              <span flex>Documentos</span>
            </div>
          </mat-list-item>
        </mat-list>
      </mat-nav-list>
    </div>
    <div flex>
      <router-outlet></router-outlet>
    </div>
  </div>

  <form class='main-content' (ngSubmit)='saveEntity(form)' [formGroup]='form'
        *ngIf="fornecedor?.status === 'EM_CRIACAO' || fornecedor?.status === 'RECUSADO'">

    <mat-card style='border-top: none !important; margin-bottom: 30px !important'
              *ngIf="(stepper.selectedIndex === 3 && visibleInfo === true) || fornecedor?.status === 'RECUSADO'">

      <button mat-mini-fab (click)='hideInfo()' type='button' *ngIf="fornecedor?.status !== 'RECUSADO'"
              style='position: absolute; left: 99%; border-radius: 50%!important;top: -12px!important;color:#00ABAF !important; background-color: #FFFFFF!important'>
        <mat-icon>clear</mat-icon>
      </button>

      <div layout='row'>
        <div style='font-size: 18px !important; font-weight: bold!important; padding-bottom: 20px'
             class='info-tittle' [ngStyle]="{'color': (fornecedor?.status !== 'RECUSADO' ? '#00ABAF' : '#E44451')}">
          {{fornecedor?.status === 'RECUSADO' ? 'Feedback' : 'Aviso Importante'}}
        </div>
      </div>

      <div layout='row'>
        <div *ngIf="fornecedor?.status !== 'RECUSADO'">
          Para completar o seu cadastro no banco de dados da Fundação PTI-BR, existem alguns documentos que precisam ser
          anexados.
          <strong>Caso a documentação obrigatória não seja anexada, o seu cadastro não será aprovado.</strong>
        </div>
        <div *ngIf="fornecedor?.status === 'RECUSADO'">
          {{fornecedor?.feedback}}
        </div>
      </div>

    </mat-card>

    <div class='toolbar' layout='row' flex>
      <div layout='row' layout-align='end center' flex>
        <button id='submitButton' mat-raised-button
                style='background-color: #F6B800!important; color: #ffffff!important'>
          <mat-icon>send</mat-icon>
          <span>Concluir e submeter à análise</span>
        </button>
      </div>
    </div>

    <mat-horizontal-stepper #stepper [class.mat-elevation-z2]='true' (selectionChange)="changeStep()">

      <ng-template matStepperIcon='edit'>
        <mat-icon>done</mat-icon>
      </ng-template>

      <ng-template matStepperIcon='done'>
        <mat-icon>done_all</mat-icon>
      </ng-template>


      <mat-step *ngIf='fornecedor?.id' [stepControl]='form?.controls?.dadosGeraisGroup'>
        <dados-gerais-form [entity]='fornecedor' [(form)]='form.controls.dadosGeraisGroup'>

          <!--Title-->
          <ng-template title matStepLabel>
            Passo 1
            <div class='mat-step-optional ng-star-inserted'>Dados gerais</div>
          </ng-template>

          <!--Divider-->
          <div divider>
            <vertical-space></vertical-space>
            <mat-divider style='margin-left: -25px; margin-right: -25px'></mat-divider>
          </div>

          <!--Actions-->
          <div flex actions layout-gt-xs='row' class='toolbar' style='margin-bottom: 0'>

            <span flex='95'></span>

            <button mat-raised-button color='primary' type='button' matStepperNext (click)='save(fornecedor)'>
              Salvar e Continuar
              <mat-icon>arrow_forward</mat-icon>
            </button>

          </div>

        </dados-gerais-form>
      </mat-step>

      <mat-step *ngIf='fornecedor?.id' [stepControl]='form?.controls?.contatosFormGroup'>
        <contatos-form [entity]='fornecedor' [(form)]='form.controls.contatosFormGroup'>

          <!--Title-->
          <ng-template title matStepLabel>Passo 2
            <div class='mat-step-optional ng-star-inserted'>Contatos</div>
          </ng-template>

          <!--Divider-->
          <div divider>
            <vertical-space></vertical-space>
            <mat-divider style='margin-left: -25px; margin-right: -25px'></mat-divider>
          </div>

          <!--Actions-->
          <div flex actions layout-gt-xs='row' class='toolbar' style='margin-bottom: 0'>

            <span flex='90'></span>

            <button mat-button type='button' matStepperPrevious>Voltar</button>
            <horizontal-space></horizontal-space>
            <button mat-raised-button color='primary' type='button' matStepperNext (click)='save(fornecedor)'>
              Salvar e Continuar
              <mat-icon>arrow_forward</mat-icon>
            </button>

          </div>

        </contatos-form>
      </mat-step>

      <mat-step *ngIf='fornecedor?.id' [stepControl]='form?.controls?.dadosBancariosFormGroup'>
        <dados-bancarios-form [entity]='fornecedor' [(form)]='form.controls.dadosBancariosFormGroup'>

          <ng-template title matStepLabel>Passo 3
            <div class='mat-step-optional ng-star-inserted'>Dados bancários</div>
          </ng-template>

          <!--Divider-->
          <div divider>
            <vertical-space></vertical-space>
            <mat-divider style='margin-left: -25px; margin-right: -25px'></mat-divider>
          </div>

          <!--Actions-->
          <div flex actions layout-gt-xs='row' class='toolbar' style='margin-bottom: 0'>

            <span flex='90'></span>

            <button mat-button type='button' matStepperPrevious>Voltar</button>
            <horizontal-space></horizontal-space>
            <button mat-raised-button color='primary' type='button' matStepperNext (click)='save(fornecedor)'>
              Salvar e Continuar
              <mat-icon>arrow_forward</mat-icon>
            </button>

          </div>

        </dados-bancarios-form>
      </mat-step>

      <mat-step *ngIf='fornecedor?.id' [stepControl]='form.controls.documentosFormGroup'>
        <documentos-form [entity]='fornecedor' [(form)]='form.controls.documentosFormGroup'>

          <ng-template title matStepLabel>Passo 4
            <div class='mat-step-optional ng-star-inserted'>Documentos</div>
          </ng-template>

          <!--Divider-->
          <div divider>
            <vertical-space></vertical-space>
            <mat-divider style='margin-left: -25px; margin-right: -25px'></mat-divider>
          </div>

          <!--Actions-->
          <div flex actions layout-gt-xs='row' class='toolbar' style='margin-bottom: 0'>

            <span flex='80'></span>

            <button mat-button type='button' matStepperPrevious>Voltar</button>
            <horizontal-space></horizontal-space>
            <button mat-raised-button (click)='save(fornecedor)' color='primary' matStepperNext>
              <mat-icon>save</mat-icon>
              Salvar
            </button>
            <horizontal-space></horizontal-space>
            <button mat-raised-button type='button' (click)="submitButtonClick('submitButton')"
                    style='background-color: #F6B800!important; color: #ffffff!important'>
              <mat-icon>send</mat-icon>
              <span>Concluir e submeter à análise</span>
            </button>
          </div>

        </documentos-form>
      </mat-step>

    </mat-horizontal-stepper>
  </form>
</div>
