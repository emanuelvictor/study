<div layout='column' flex [formGroup]='form?.controls?.contatos'>
  <!-- Tittle content-->
  <ng-content select='[tittle]'></ng-content>

  <vertical-space></vertical-space>

  <!--<div layout='column'>-->
    <!--Cidade: {{entity?.endereco?.cidade?.nome}}, Id: {{entity?.endereco?.cidade?.id}}-->
  <!--</div>-->
  <!--<div layout='column'>-->
    <!--Estado: {{entity?.endereco?.cidade?.estado?.nome}}, Id: {{entity?.endereco?.cidade?.estado?.id}}-->
  <!--</div>-->
  <!--<div layout='column'>-->
    <!--País: {{entity?.endereco?.cidade?.estado?.pais?.nome}}, Id: {{entity?.endereco?.cidade?.estado?.pais?.id}}-->
  <!--</div>-->

  <!--Content-->
  <div layout='row' layout-sm='column' layout-xs='column'>
    <mat-form-field flex>
      <input flex id='cep' name='cep' maxlength='10'
             formControlName='cep' required matInput
             (change)='findByCep(entity.endereco.cep)'
             [textMask]='{mask: masks.cep, guide: false }'
             placeholder='CEP' [(ngModel)]='entity.endereco.cep'/>
      <mat-error *ngIf="form?.controls?.contatos?.get('cep')?.hasError('exception')">
        {{form?.controls?.contatos?.get('cep')?.errors?.exception}}
      </mat-error>
    </mat-form-field>

    <horizontal-space></horizontal-space>

    <mat-form-field flex>
      <input formControlName='logradouro'
             maxlength='40' required flex
             id='logradouro' name='logradouro'
             placeholder='Logradouro' matInput
             [(ngModel)]='entity.endereco.logradouro'/>
      <mat-error *ngIf="form?.controls?.contatos?.get('logradouro')?.hasError('exception')">
        {{form?.controls?.contatos?.get('logradouro')?.errors?.exception}}
      </mat-error>
    </mat-form-field>


    <horizontal-space></horizontal-space>

    <mat-form-field flex>
      <input required flex matInput
             id='numero' name='numero'
             [(ngModel)]='entity.endereco.numero'
             placeholder='Número' formControlName='numero'/>
      <mat-error *ngIf="form?.controls?.contatos?.get('numero')?.hasError('exception')">
        {{form?.controls?.contatos?.get('numero')?.errors?.exception}}
      </mat-error>
    </mat-form-field>

    <horizontal-space></horizontal-space>

    <mat-form-field flex>
      <input placeholder='Caixa Postal'
             maxlength='20' matInput flex
             formControlName='caixaPostal'
             id='caixaPostal' name='caixaPostal'
             [(ngModel)]='entity.endereco.caixaPostal'/>
    </mat-form-field>
  </div>

  <div layout='row' layout-sm='column' layout-xs='column'>
    <mat-form-field flex>
      <input name='pais' id='pais' placeholder='País'
             (ngModelChange)='paisVerifyChanged.next()'
             [matAutocomplete]='auto' required matInput
             [(ngModel)]='entity.endereco.cidade.estado.pais.nome'
             formControlName='pais' (keyup)='paisModelChanged.next()'>

      <mat-autocomplete [displayWith]='displayNome' #auto='matAutocomplete'
                        (optionSelected)="parseOptionSelected('pais', $event)">
        <mat-option [value]='{id : pais.id, nome: pais.nome}' *ngFor='let pais of paises'>
          {{ pais.nome }}
        </mat-option>
      </mat-autocomplete>

      <mat-error *ngIf="form?.controls?.contatos?.get('pais')?.hasError('exception')">
        {{form?.controls?.contatos?.get('pais')?.errors?.exception}}
      </mat-error>
    </mat-form-field>

    <horizontal-space></horizontal-space>

    <mat-form-field flex>
      <input (ngModelChange)='estadoVerifyChanged.next()'
             name='estado' id='estado' placeholder='Estado'
             [(ngModel)]='entity.endereco.cidade.estado.nome'
             [matAutocomplete]='autoEstado' matInput required
             formControlName='estado' (keyup)='estadoModelChanged.next()'>

      <mat-autocomplete (optionSelected)="parseOptionSelected('estado', $event)"
                        [displayWith]='displayNome' #autoEstado='matAutocomplete'>
        <mat-option [value]='{id : estado.id, nome: estado.nome, pais : estado.pais}' *ngFor='let estado of estados'>
          {{ estado.nome }}
        </mat-option>
      </mat-autocomplete>

      <mat-error *ngIf="form?.controls?.contatos?.get('estado')?.hasError('exception')">
        {{form?.controls?.contatos?.get('estado')?.errors?.exception}}
      </mat-error>
    </mat-form-field>

    <horizontal-space></horizontal-space>

    <mat-form-field flex>
      <input [matAutocomplete]='autoCidade'
             (ngModelChange)='cidadeVerifyChanged.next()'
             [(ngModel)]='entity.endereco.cidade.nome' required
             matInput id='cidade' name='cidade' placeholder='Cidade'
             formControlName='cidade' (keyup)='cidadeModelChanged.next()'>

      <mat-autocomplete (optionSelected)="parseOptionSelected('cidade', $event)"
                        [displayWith]='displayNome' #autoCidade='matAutocomplete'>
        <mat-option [value]='{id : cidade.id, nome: cidade.nome, estado : cidade.estado}'
                    *ngFor='let cidade of cidades'>
          {{ cidade.nome }}
        </mat-option>
      </mat-autocomplete>

      <mat-error *ngIf="form?.controls?.contatos?.get('cidade')?.hasError('exception')">
        {{form?.controls?.contatos?.get('cidade')?.errors?.exception}}
      </mat-error>
    </mat-form-field>

    <horizontal-space></horizontal-space>

    <mat-form-field flex>
      <input placeholder='Site (opcional)'
             [(ngModel)]='entity.site' formControlName='site'
             matInput id='site' name='site' flex maxlength='150'/>
    </mat-form-field>

  </div>

  <mat-form-field flex>
    <input placeholder='Complemento'
           matInput flex maxlength='50'
           formControlName='complemento'
           id='complemento' name='complemento'
           [(ngModel)]='entity.endereco.complemento'/>
  </mat-form-field>

  <div layout='row' layout-sm='column' layout-xs='column'>
    <mat-form-field flex [ngStyle]="{'margin-top': (entity?.telefones?.length ? '-2px' : '15px')}">
      <mat-chip-list #chipListTelefones aria-label='Telefones' formArrayName='telefones'>

        <mat-chip [disabled]='entity?.aprovado'
                  [removable]='!entity?.aprovado'
                  [selectable]='!entity?.aprovado'
                  (removed)='removeTelefone(telefone)'
                  *ngFor='let telefone of entity.telefones'>
          {{telefone}}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>
        <input [matChipInputFor]='chipListTelefones' [matChipInputAddOnBlur]='!entity?.aprovado'
               (matChipInputTokenEnd)='addTelefone($event)' [textMask]='{mask: phoneMask, guide: false }'
               [disabled]='entity?.aprovado' maxlength='50' placeholder='Telefones' id='telefones' name='telefones'>

      </mat-chip-list>

      <mat-error *ngIf="form?.controls?.contatos?.get('telefones')?.hasError('exception')">
        {{form?.controls?.contatos?.get('telefones')?.errors?.exception}}
      </mat-error>

    </mat-form-field>

    <horizontal-space></horizontal-space>

    <mat-form-field flex [ngStyle]="{'margin-top': (entity?.emails?.length ? '-2px' : '15px')}">
      <mat-chip-list #chipListEmails aria-label='E-mails' formArrayName='emails'>

        <mat-chip *ngFor='let email of entity.emails; let i = index' [disabled]='entity?.aprovado'
                  (removed)='removeEmail(email)' [selectable]='!entity?.aprovado' [removable]='!entity?.aprovado'
                  [ngStyle]="{ 'background-color': (i == 0 ? '#0097A7' : '#E0E0E0'),'color': (i == 0 ? '#FFFFFF' : '#000000')}">
          {{email}}
          <mat-icon matChipRemove>cancel</mat-icon>
        </mat-chip>

        <input placeholder='E-mails' id='emails' name='emails' maxlength='100'
               [matChipInputFor]='chipListEmails' [matChipInputAddOnBlur]='!entity?.aprovado' [disabled]='entity?.aprovado'
               (matChipInputTokenEnd)="form.controls['contatos'].get('emails').hasError('email') ? null : addEmail($event)">
      </mat-chip-list>
      <mat-hint align='start'>
        O primeiro endereço de correio eletrônico informado, será o <span style='color: #00ABAF'>email principal</span>, onde serão encaminhadas as notificações de criação e recuperação de senha
      </mat-hint>

      <mat-error *ngIf="form?.controls?.contatos?.get('emails')?.hasError('exception')">
        {{form?.controls?.contatos?.get('emails')?.errors?.exception}}
      </mat-error>

    </mat-form-field>

  </div>

  <!--Divider content-->
  <ng-content select='[divider]'></ng-content>

  <vertical-space></vertical-space>

  <!-- Toolbar content-->
  <ng-content select='[actions]'></ng-content>

</div>
