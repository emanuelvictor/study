<mat-toolbar class='mat-elevation-z2 sistema-toolbar' style='background-color : #fff; padding: 0'>
  <div style='margin-left: 30px;margin-right: 30px' flex layout='row'>
    <button mat-icon-button (click)='sidenav.toggle()' hide-gt-sm style='margin-top: 8px'>
      <mat-icon>menu</mat-icon>
    </button>

    <div layout-align='start center'
         flex-xs='80' flex-gt-xs='15'
         flex-sm='75' layout='row' flex
         flex-gt-sm='10' flex-gt-md='20'>
      <img class='size-height-50' style='height: 40px; padding-left: 16px; cursor: pointer' alt='Logo PTI'
           src='../../../assets/images/logo_pti_sem_descritivo_preta@2x.png'>
    </div>

    <!--<span flex-xl='20' flex-lg='10' hide-md hide-sm hide-xs></span>-->

    <div flex hide-sm>
      <div flex layout='row' layout-align='center center' class="sistema-header">
        <a style='margin-top: 8px; color: #4C4C4C'
           routerLinkActive mat-button hide-xs #rlaBens='routerLinkActive'
           *hasPermission="['root', 'inventarios', 'inventarios/get']; operation 'OR'"
           [ngClass]="{'menu-active': rlaBens.isActive}" [routerLink]="'/bens'">
          <mat-icon>list_alt</mat-icon>
          Bens
        </a>
        <a style='margin-top: 8px; color: #4C4C4C'
           routerLinkActive mat-button hide-xs #rlaConfiguracoes='routerLinkActive'
           [ngClass]="{'menu-active': rlaConfiguracoes.isActive}" [routerLink]="'/configuracoes'"
           *hasPermission="['root', 'usuarios', 'usuarios/get', 'grupos-acesso', 'grupos-acesso/get']; operation 'OR'">
          <mat-icon>tune</mat-icon>
          Configurações
        </a>
      </div>
    </div>

    <div flex='20' layout='row' layout-align='end center' hide-xs>

      <div [matMenuTriggerFor]='menu' layout='row'
           style='cursor: pointer; color: #4C4C4C'
           layout-margin layout-align='end center'>

        <button mat-button class='header-button'>
            {{usuario?.nome ? usuario?.nome : usuario?.email}}
          <mat-icon>keyboard_arrow_down</mat-icon>
        </button>
      </div>
    </div>

    <mat-menu #menu='matMenu'>
      <button (click)='openDialogChangePassword()'
              color='primary' style='color: #4C4C4C'
              *ngIf='!usuario?.interno' mat-menu-item>
        <span>Alterar senha</span>
      </button>
      <button mat-menu-item (click)='logout()' color='primary' style='color: #4C4C4C'>
        <mat-icon>power_settings_new</mat-icon>
        <span>Sair</span>
      </button>
    </mat-menu>
  </div>
</mat-toolbar>
<mat-sidenav-container>

  <!-- MENU LATERAL -->
  <mat-sidenav #sidenav mode='over' [opened]='false'>

    <div layout='row' class='menu-top' *ngIf='usuario' flex>

      <div layout='column' (click)='openDialogChangePassword()'
           matTooltip='Alterar senha' [style.position]="'relative'">

        <button mat-icon-button class='btn-primary'>
          {{ usuario.nome | userInitials }}
        </button>
        <mat-icon matSuffix class="change-password">settings</mat-icon>

      </div>
      <horizontal-space [horizontalMargin]="5"></horizontal-space>
      <div layout='column' style="margin-left: 10px;">
        <h3>{{ usuario.nome }}</h3>
        <label *ngIf="usuario?.email?.length <= 24">{{ usuario.email }}</label>
        <label matTooltip='{{ usuario?.email }}' *ngIf='usuario?.email?.length > 24'>
          {{ usuario.email | truncate:21 }}
        </label>
      </div>
    </div>

    <mat-nav-list class='pad-none' *ngIf="usuario" flex>
      <mat-list class='pad-none'>
        <mat-list-item #rlaBens='routerLinkActive' [routerLink]="'/bens'"
                       class='menu-routers' (click)='sidenav.close()' routerLinkActive flex
                       [ngClass]="{'menu-active': rlaBens.isActive}" mat-icon-button
                       *hasPermission="['root', 'inventarios', 'inventarios/get']; operation 'OR'">
          <div layout='row' class="menu-item">
            <mat-icon>list_alt</mat-icon>
            <h3>Bens</h3>
          </div>
        </mat-list-item>
        <mat-list-item #rlaConfiguracoes='routerLinkActive' [routerLink]="'/configuracoes'"
                       class='menu-routers' (click)='sidenav.close()' routerLinkActive flex
                       [ngClass]="{'menu-active': rlaConfiguracoes.isActive}" mat-icon-button
                       *hasPermission="['root', 'usuarios', 'usuarios/get', 'grupos-acesso', 'grupos-acesso/get']; operation 'OR'">
          <div layout='row' class="menu-item">
            <mat-icon>tune</mat-icon>
            <h3>Configurações</h3>
          </div>
        </mat-list-item>


        <!--<td-expansion-panel *ngIf='usuario?.isRoot'-->
        <!--[expand]="rlaSetores.isActive-->
        <!--|| rlaUsuarios.isActive"-->
        <!--[ngClass]="{'expansion-menu-active': rlaSetores.isActive-->
        <!--|| rlaUsuarios.isActive}">-->
        <!--<ng-template td-expansion-panel-label>-->
        <!--<div layout='row' class="menu-item">-->
        <!--<mat-icon>archive</mat-icon>-->
        <!--<h3>Cadastros</h3>-->
        <!--</div>-->
        <!--</ng-template>-->

        <!--<a routerLinkActive-->
        <!--(click)='sidenav.close()'-->
        <!--[routerLink]="['/setores']"-->
        <!--#rlaSetores='routerLinkActive'-->
        <!--[ngClass]="{'submenu-active': rlaSetores.isActive}">-->
        <!--<mat-list-item>-->
        <!--<div layout='row' class="submenu-item" flex>-->
        <!--<h3>Setor</h3>-->
        <!--</div>-->
        <!--</mat-list-item>-->
        <!--</a>-->

        <!--<a routerLinkActive-->
        <!--(click)='sidenav.close()'-->
        <!--[routerLink]="['/usuarios']"-->
        <!--#rlaUsuarios='routerLinkActive'-->
        <!--[ngClass]="{'submenu-active': rlaUsuarios.isActive}">-->
        <!--<mat-list-item>-->
        <!--<div layout='row' class="submenu-item" flex>-->
        <!--<h3>Usuário</h3>-->
        <!--</div>-->
        <!--</mat-list-item>-->
        <!--</a>-->
        <!--</td-expansion-panel>-->

      </mat-list>
    </mat-nav-list>

    <div class='menu-bottom' flex layout='column'>

      <div layout='row' layout-align='center center'>
        <img class='image-logo' alt='Logo PTI' [src]="'../../../assets/images/logo-pti.png'">
      </div>
      <mat-divider></mat-divider>
      <div layout='row' layout-align="center start">
        <button mat-button (click)='logout()' flex>
          <mat-icon>exit_to_app</mat-icon>
          <span>Sair</span>
        </button>
      </div>
    </div>

  </mat-sidenav>

  <!-- ROTEAMENTO DE COMPONENTES DA APLICAÇÃO -->
  <router-outlet></router-outlet>

</mat-sidenav-container>
