<form [formGroup]='form' (ngSubmit)='saveEntity(form)' novalidate>

  <!--toolbar div-->
  <ng-content select='[toolbar]'></ng-content>

  <mat-card id='default-form'>
    <div layout='row' layout-sm='column' layout-xs='column'>

      <mat-slide-toggle style='padding-top: 10px'
                        [(ngModel)]='entity.administrador'
                        [ngModelOptions]='{standalone: true}'>
        Administrador
      </mat-slide-toggle>

      <horizontal-space></horizontal-space>

      <mat-form-field flex>
        <input (keyup)='getEmail()' [(ngModel)]='entity.email'
               matInput placeholder='E-mail' [matAutocomplete]='auto'
               formControlName='email' name='email' id='email' maxlength='150'
               required pattern='[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$'>

        <mat-error *ngIf="form.controls['email'].hasError('pattern')">
          E-mail inválido, utilize o formato "exemplo@email.com"
        </mat-error>
        <mat-error *ngIf="form.controls['email'].hasError('required')">
          Esse campo é obrigatório
        </mat-error>
      </mat-form-field>

      <mat-autocomplete #auto='matAutocomplete' [displayWith]='displayFn'>
        <ng-container *ngIf='usuarios?.length'>
          <mat-option *ngFor='let usuario of usuarios'
                      [value]='usuario.email' (click)='getEmail()'>
            <span>{{ usuario?.nome }} ({{usuario?.email }})</span>
          </mat-option>
        </ng-container>
      </mat-autocomplete>

      <horizontal-space></horizontal-space>

      <mat-form-field flex>
        <input formControlName='nome'
               required id='nome' name='nome'
               placeholder='Nome' maxlength='150'
               [(ngModel)]='entity.nome' matInput/>
        <mat-error>
          Esse campo é obrigatório
        </mat-error>
      </mat-form-field>

      <horizontal-space></horizontal-space>

      <administrador-form flex [form]='form'
                          *ngIf='!entity.administrador'
                          [(grupoAcesso)]='entity.grupoAcesso'>
      </administrador-form>

    </div>
  </mat-card>
</form>
