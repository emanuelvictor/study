<h1 mat-dialog-title>Adicionar novo anexo</h1>
<div style='font-size: 13px;margin-top: -19px;color: #4C4C4C'>
  Atenção, certifique-se de adicionar o arquivo correto. Após o envio, o arquivo estará disponível para o público.
</div>

<form [formGroup]='form' (ngSubmit)='saveEntity(form)' novalidate>
  <div mat-dialog-content style='margin-top: 30px; max-height: 100%'>

    <div layout='column'>
      <div layout='row'>
        <mat-form-field flex>
          <input placeholder='Nome do anexo' required flex
                 formControlName='nome{{index}}' *ngIf='index'
                 [(ngModel)]='anexo.nome' (keyup)='verifyNome()'
                 matInput id='nome{{index}}' name='nome{{index}}'/>
          <mat-error>
            Insira um anexo (apenas arquivos .pdf)
          </mat-error>
          <mat-hint>
            Este nome irá substituir o nome do arquivo adicionado.
          </mat-hint>
        </mat-form-field>
        <button mat-icon-button color='primary'
                *ngIf='anexo?.conteudo?.lastModified'
                type='button' style='margin-top: 3px'>
          <mat-icon (click)='removeAnexo()'>delete</mat-icon>
        </button>
      </div>

      <input (change)='onFileChange($event)'
             type='file' accept='.pdf' style='display: none'
             id='inputField{{index}}' name='inputField{{index}}'/>

      <file-drop (click)='selectFile()'
                 accept='.pdf' *ngIf='!anexo?.conteudo?.name'
                 (onFileDrop)='dropped($event)' style='margin-bottom: 39px;margin-top: 20px; cursor: pointer'>
        <div layout='column' layout-align='center center'
             style='width: 168px; text-align: center; margin-top: 80px'>
          <mat-icon style='font-size: 60px; margin-bottom: 12px'>cloud_upload</mat-icon>
          <span>Arraste o arquivo ou <strong>procure</strong> no computador</span>
        </div>
      </file-drop>


      <iframe [src]='url' *ngIf='url' allowfullscreen
              width='800' height='600' frameborder='0'
              webkitallowfullscreen mozallowfullscreen>
      </iframe>

    </div>

  </div>

  <mat-divider></mat-divider>

  <div mat-dialog-actions>
    <button mat-button color='accent'
            type='button' [mat-dialog-close]='false'>
      Cancelar
    </button>
    <button color='primary' mat-raised-button>
      <mat-icon>send</mat-icon>
      <span>Enviar</span>
    </button>
  </div>
</form>
